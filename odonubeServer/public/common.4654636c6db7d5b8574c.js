"use strict";(self.webpackChunkodonube_front=self.webpackChunkodonube_front||[]).push([[592],{5162:(_,c,r)=>{r.d(c,{o:()=>g});var p=r(1841),m=r(5758),d=r(639),u=r(8583),h=r(827);let g=(()=>{class i{constructor(n,a,e){this.http=n,this.datePipe=a,this.auth=e,this.today=new Date,this.localSource="http://localhost:3400",this.serverSource="",this.mySource=this.serverSource}createSomething(n,a){let e=new p.WM;e=e.append("Content-Type","application/json");let o=this.auth.getToken();null!=o&&(e=e.append("Authorization",o));var t=this.mySource;return this.http.post(t+=a,n,{headers:e})}getSomething(n){let a=new p.WM;a=a.append("Content-Type","application/json");let e=this.auth.getToken();a=a.append("Authorization",e);var o=this.mySource;return this.http.get(o+=n,{headers:a})}updateSomething(n,a){let e=new p.WM;e=e.append("Content-Type","application/json");let o=this.auth.getToken();e=e.append("Authorization",o);var t=this.mySource;return this.http.put(t+=a,n,{headers:e})}deleteSomething(n,a){let e=new p.WM;e=e.append("Content-Type","application/json");let o=this.auth.getToken();e=e.append("Authorization",o);var t=this.mySource;t+=a;let s=new p.LE;return s=s.append("item",n),this.http.delete(t,{headers:e,params:s})}setLocal(n,a){localStorage.removeItem(n),localStorage.setItem(n,JSON.stringify(a))}getLocal(n){return""}refreshData(n,a){console.log("starting refreshment");let e=[],o=[];if(n.values&&n.values.length){Object.keys(n.values[0]).forEach(l=>{l=l[0].toUpperCase()+l.slice(1),e.push(l)}),o=n.values,this.setLocal(a+"Fields",e),this.setLocal(a+"Values",o)}else this.setLocal(a+"Values",[]),this.setLocal(a+"Fields",[])}actualizar(){let e,a=this.auth.decode().type;"SuperAdmin"==a?e=[{endpoint:"/users/all",name:"users"},{endpoint:"/clientes/all",name:"clientes"},{endpoint:"/gastos/all",name:"gastos"},{endpoint:"/proveedores/all",name:"proveedores"},{endpoint:"/productos/all",name:"productos"},{endpoint:"/almacenes/all",name:"almacenes"},{endpoint:"/compras/all",name:"compras"},{endpoint:"/pedidos/all",name:"pedidos"},{endpoint:"/precios/all",name:"precios"},{endpoint:"/roles/all",name:"roles"},{endpoint:"/bancos/all",name:"bancos"},{endpoint:"/proformas/all",name:"proformas"},{endpoint:"/cuentast/all",name:"cuentast"},{endpoint:"/cuentasporcobrar/all",name:"cuentasporcobrar"},{endpoint:"/cuentasporpagar/all",name:"cuentasporpagar"},{endpoint:"/cobros/all",name:"cobros"},{endpoint:"/pagos/all",name:"pagos"},{endpoint:"/company",name:"company"}]:"Admin"==a?e=[{endpoint:"/clientes/all",name:"clientes"},{endpoint:"/proveedores/all",name:"proveedores"},{endpoint:"/productos/all",name:"productos"},{endpoint:"/almacenes/all",name:"almacenes"},{endpoint:"/compras/all",name:"compras"},{endpoint:"/pedidos/all",name:"pedidos"},{endpoint:"/bancos/all",name:"bancos"},{endpoint:"/proformas/all",name:"proformas"},{endpoint:"/cuentast/all",name:"cuentast"},{endpoint:"/cuentasporcobrar/all",name:"cuentasporcobrar"},{endpoint:"/cuentasporpagar/all",name:"cuentasporpagar"},{endpoint:"/precios/all",name:"precios"},{endpoint:"/company",name:"company"}]:"Vendedor"==a&&(e=[{endpoint:"/clientes/all",name:"clientes"},{endpoint:"/productos/all",name:"productos"},{endpoint:"/almacenes/all",name:"almacenes"},{endpoint:"/company",name:"company"},{endpoint:"/pedidos/all",name:"pedidos"}]);let o=[];e.forEach(t=>{o.push(this.getSomething(t.endpoint))}),(0,m.D)(o).subscribe(t=>{let s=0;e.forEach(l=>{this.refreshData(t[s],l.name),s++}),window.location.reload()})}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(p.eN),d.LFG(u.uU),d.LFG(h.e))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}]);